var keyboard = {
    config: {
        "backcolor": "#ffffff",
        "name": "niz_84ec_s_ble",
        "author": "chenjr15",
        "notes": "# Niz 84EC(S)Ble键盘",
        "radii": "20px",
        "pcb": false,
        "plate": false
    },
    layout: [
        [{
                "label": "Esc",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 1,
                "style": "--key-width-scale:1"
            },
            {
                "label": "",
                "width": 0.8,
                "height": 1,
                "color": "",
                "type": "placeholder",
                "hwid": 0,
                "style": "--key-width-scale:0.8"
            },
            {
                "label": "F1",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 2,
                "style": "--key-width-scale:1"
            },
            {
                "label": "F2",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 3,
                "style": "--key-width-scale:1"
            },
            {
                "label": "F3",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 4,
                "style": "--key-width-scale:1"
            },
            {
                "label": "F4",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 5,
                "style": "--key-width-scale:1"
            },
            {
                "label": "",
                "width": 0.4,
                "height": 1,
                "color": "",
                "type": "placeholder",
                "hwid": 0,
                "style": "--key-width-scale:0.4"
            },
            {
                "label": "F5",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 6,
                "style": "--key-width-scale:1"
            },
            {
                "label": "F6",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 7,
                "style": "--key-width-scale:1"
            },
            {
                "label": "F7",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 8,
                "style": "--key-width-scale:1"
            },
            {
                "label": "F8",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 9,
                "style": "--key-width-scale:1"
            },
            {
                "label": "",
                "width": 0.4,
                "height": 1,
                "color": "",
                "type": "placeholder",
                "hwid": 0,
                "style": "--key-width-scale:0.4"
            },
            {
                "label": "F9",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 10,
                "style": "--key-width-scale:1"
            },
            {
                "label": "F10",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 11,
                "style": "--key-width-scale:1"
            },
            {
                "label": "F11",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 12,
                "style": "--key-width-scale:1"
            },
            {
                "label": "F12",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 13,
                "style": "--key-width-scale:1"
            },
            {
                "label": "",
                "width": 0.4,
                "height": 1,
                "color": "",
                "type": "placeholder",
                "hwid": 0,
                "style": "--key-width-scale:0.4"
            },
            {
                "label": "Del",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 14,
                "style": "--key-width-scale:1"
            }
        ],
        [{
                "label": "~\n`",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 15,
                "style": "--key-width-scale:1"
            },
            {
                "label": "!\n1",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 16,
                "style": "--key-width-scale:1"
            },
            {
                "label": "@\n2",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 17,
                "style": "--key-width-scale:1"
            },
            {
                "label": "#\n3",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 18,
                "style": "--key-width-scale:1"
            },
            {
                "label": "$\n4",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 19,
                "style": "--key-width-scale:1"
            },
            {
                "label": "%\n5",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 20,
                "style": "--key-width-scale:1"
            },
            {
                "label": "^\n6",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 21,
                "style": "--key-width-scale:1"
            },
            {
                "label": "&\n7",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 22,
                "style": "--key-width-scale:1"
            },
            {
                "label": "*\n8",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 23,
                "style": "--key-width-scale:1"
            },
            {
                "label": "(\n9",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 24,
                "style": "--key-width-scale:1"
            },
            {
                "label": ")\n0",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 25,
                "style": "--key-width-scale:1"
            },
            {
                "label": "_\n-",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 26,
                "style": "--key-width-scale:1"
            },
            {
                "label": "+\n=",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 27,
                "style": "--key-width-scale:1"
            },
            {
                "label": "Backspace",
                "width": 2,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 28,
                "style": "--key-width-scale:2"
            },
            {
                "label": "Home",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 29,
                "style": "--key-width-scale:1"
            }
        ],
        [{
                "label": "Tab",
                "width": 1.5,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 30,
                "style": "--key-width-scale:1.5"
            },
            {
                "label": "Q",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 31,
                "style": "--key-width-scale:1"
            },
            {
                "label": "W",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 32,
                "style": "--key-width-scale:1"
            },
            {
                "label": "E",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 33,
                "style": "--key-width-scale:1"
            },
            {
                "label": "R",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 34,
                "style": "--key-width-scale:1"
            },
            {
                "label": "T",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 35,
                "style": "--key-width-scale:1"
            },
            {
                "label": "Y",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 36,
                "style": "--key-width-scale:1"
            },
            {
                "label": "U",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 37,
                "style": "--key-width-scale:1"
            },
            {
                "label": "I",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 38,
                "style": "--key-width-scale:1"
            },
            {
                "label": "O",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 39,
                "style": "--key-width-scale:1"
            },
            {
                "label": "P",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 40,
                "style": "--key-width-scale:1"
            },
            {
                "label": "{\n[",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 41,
                "style": "--key-width-scale:1"
            },
            {
                "label": "}\n]",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 42,
                "style": "--key-width-scale:1"
            },
            {
                "label": "|\n\\",
                "width": 1.5,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 43,
                "style": "--key-width-scale:1.5"
            },
            {
                "label": "PgUp",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 44,
                "style": "--key-width-scale:1"
            }
        ],
        [{
                "label": "Caps Lock",
                "width": 1.75,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 45,
                "style": "--key-width-scale:1.75"
            },
            {
                "label": "A",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 46,
                "style": "--key-width-scale:1"
            },
            {
                "label": "S",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 47,
                "style": "--key-width-scale:1"
            },
            {
                "label": "D",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 48,
                "style": "--key-width-scale:1"
            },
            {
                "label": "F",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 49,
                "style": "--key-width-scale:1"
            },
            {
                "label": "G",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 50,
                "style": "--key-width-scale:1"
            },
            {
                "label": "H",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 51,
                "style": "--key-width-scale:1"
            },
            {
                "label": "J",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 52,
                "style": "--key-width-scale:1"
            },
            {
                "label": "K",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 53,
                "style": "--key-width-scale:1"
            },
            {
                "label": "L",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 54,
                "style": "--key-width-scale:1"
            },
            {
                "label": ":\n;",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 55,
                "style": "--key-width-scale:1"
            },
            {
                "label": "\"\n'",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 56,
                "style": "--key-width-scale:1"
            },
            {
                "label": "Enter",
                "width": 2.25,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 57,
                "style": "--key-width-scale:2.25"
            },
            {
                "label": "PgDn",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 58,
                "style": "--key-width-scale:1"
            }
        ],
        [{
                "label": "Shift",
                "width": 2.25,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 59,
                "style": "--key-width-scale:2.25"
            },
            {
                "label": "Z",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 60,
                "style": "--key-width-scale:1"
            },
            {
                "label": "X",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 61,
                "style": "--key-width-scale:1"
            },
            {
                "label": "C",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 62,
                "style": "--key-width-scale:1"
            },
            {
                "label": "V",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 63,
                "style": "--key-width-scale:1"
            },
            {
                "label": "B",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 64,
                "style": "--key-width-scale:1"
            },
            {
                "label": "N",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 65,
                "style": "--key-width-scale:1"
            },
            {
                "label": "M",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 66,
                "style": "--key-width-scale:1"
            },
            {
                "label": "<\n,",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 67,
                "style": "--key-width-scale:1"
            },
            {
                "label": ">\n.",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 68,
                "style": "--key-width-scale:1"
            },
            {
                "label": "?\n/",
                "width": 1,
                "height": 1,
                "color": "#cccccc",
                "type": "key",
                "hwid": 69,
                "style": "--key-width-scale:1"
            },
            {
                "label": "Shift",
                "width": 1.75,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 70,
                "style": "--key-width-scale:1.75"
            },
            {
                "label": "↑",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 71,
                "style": "--key-width-scale:1"
            },
            {
                "label": "End",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 72,
                "style": "--key-width-scale:1"
            }
        ],
        [{
                "label": "Ctrl",
                "width": 1.25,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 73,
                "style": "--key-width-scale:1.25"
            },
            {
                "label": "Fn",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 74,
                "style": "--key-width-scale:1"
            },
            {
                "label": "Win",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 75,
                "style": "--key-width-scale:1"
            },
            {
                "label": "Alt",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 76,
                "style": "--key-width-scale:1"
            },
            {
                "label": "",
                "width": 4.75,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 77,
                "style": "--key-width-scale:4.75"
            },
            {
                "label": "Fn",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 78,
                "style": "--key-width-scale:1"
            },
            {
                "label": "Alt",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 79,
                "style": "--key-width-scale:1"
            },
            {
                "label": "Menu",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 80,
                "style": "--key-width-scale:1"
            },
            {
                "label": "Ctrl",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 81,
                "style": "--key-width-scale:1"
            },
            {
                "label": "←",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 82,
                "style": "--key-width-scale:1"
            },
            {
                "label": "↓",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 83,
                "style": "--key-width-scale:1"
            },
            {
                "label": "→",
                "width": 1,
                "height": 1,
                "color": "#b0b0b0",
                "type": "key",
                "hwid": 84,
                "style": "--key-width-scale:1"
            }
        ]
    ]
};

function kle2layout(kleRows) {
    let formated_rows = []
    console.log(config)
    console.log(rows)
    let width = 1;
    let height = 1;
    let color = '#fff';
    let id = 1;
    for (const row of kleRows) {
        let formated_row = []
        for (const col of row) {
            if (Object.prototype.toString.call(col) === "[object String]") {
                let label = col;
                let key = new Key(label, width, height, color);
                key.hwid = id++;
                formated_row.push(key)
                width = 1;
                // color = '#000'

            } else {
                if (col['w']) {
                    width = col['w']
                }
                if (col['c']) {
                    color = col['c']
                }
                if (col['x']) {
                    formated_row.push(new Key('', col['x'], 1, '', class_ = 'placeholder'))
                }

            }
        }
        formated_rows.push(formated_row)
        console.log(formated_row)
    }
}